There are n ⋅ m n ⋅ m unit cubes currently in positions ( 1 , 1 , 1 ) ( 1 , 1 , 1 ) through ( n , m , 1 ) ( n , m , 1 ) . Each of these cubes is one of k k colors. You want to add additional cubes at any integer coordinates such that the subset of cubes of each color is connected, where two cubes are considered connected if they share a face.
In other words, for every pair of cubes of the same color c c , it should be possible to travel from one to the other, moving only through cubes of color c c that share a face.
The existing cubes are currently in the corner of a room. There are colorless cubes completely filling the planes x = 0 x = 0 , y = 0 y = 0 , and z = 0 z = 0 , preventing you from placing additional cubes there or at any negative coordinates.
Find a solution that uses at most 4 ⋅ 10 5 4 ⋅ 10 5 additional cubes (not including the cubes that are currently present), or determine that there is no solution. It can be shown that under the given constraints, if there is a solution, there is one using at most 4 ⋅ 10 5 4 ⋅ 10 5 additional cubes.