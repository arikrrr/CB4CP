You have some cards. An integer between 1 1 and n n is written on each card: specifically, for each i i from 1 1 to n n , you have a i a i cards which have the number i i written on them.
There is also a shop which contains unlimited cards of each type. You have k k coins, so you can buy k k new cards in total, and the cards you buy can contain any integer between 1 1 and n n .
After buying the new cards, you rearrange all your cards in a line. The score of a rearrangement is the number of (contiguous) subarrays of length n n which are a permutation of [ 1 , 2 , … , n ] [ 1 , 2 , … , n ] . What's the maximum score you can get?