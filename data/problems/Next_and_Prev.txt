Let p 1 , … , p n p 1 , … , p n be a permutation of [ 1 , … , n ] [ 1 , … , n ] .
Let the q q -subsequence of p p be a permutation of [ 1 , q ] [ 1 , q ] , whose elements are in the same relative order as in p 1 , … , p n p 1 , … , p n . That is, we extract all elements not exceeding q q together from p p in the original order, and they make the q q -subsequence of p p .
For a given array a a , let p r e ( i ) p r e ( i ) be the largest value satisfying p r e ( i ) < i p r e ( i ) < i and a p r e ( i ) > a i a p r e ( i ) > a i . If it does not exist, let p r e ( i ) = − 10 100 p r e ( i ) = − 10 100 . Let n x t ( i ) n x t ( i ) be the smallest value satisfying n x t ( i ) > i n x t ( i ) > i and a n x t ( i ) > a i a n x t ( i ) > a i . If it does not exist, let n x t ( i ) = 10 100 n x t ( i ) = 10 100 .
For each q q such that 1 ≤ q ≤ n 1 ≤ q ≤ n , let a 1 , … , a q a 1 , … , a q be the q q -subsequence of p p . For each i i such that 1 ≤ i ≤ q 1 ≤ i ≤ q , p r e ( i ) p r e ( i ) and n x t ( i ) n x t ( i ) will be calculated as defined. Then, you will be given some integer values of x x , and for each of them you have to calculate ∑ i = 1 q min ( n x t ( i ) − p r e ( i ) , x ) ∑ i = 1 q min ( n x t ( i ) − p r e ( i ) , x ) .